{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}

{% block body %}
    <div hidden>{{ user.id }}</div>

    <div class="container">
        <div class="row mb-5">
            <h3 class="text-center col-12 border-bottom border-primary">Bienvenue {{ user.firstname }}</h3>
        </div>

        <div class="row">
{#  affichage du porfil utilisateurs#}
            <div class="card col-12 col-lg-4" style="width: 18rem;">
                <img src="{{ '/uploads/images/' ~ user.picture }}" class="card-img-top" alt="photo de l'adherent">
                <h5 class="card-title font-weight-bold">{{ user.firstname }} {{ user.lastname }}</h5>
                <p class="card-text">mail:{{ user.email }} </p>
                <p class="card-text">Téléphone:{{ user.homePhone }} </p>
                <p class="card-text">Mobile:{{ user.mobilePhone }} </p>
                <p class="card-text">Adresse:{{ user.address }} </p>
                <p class="card-text">{{ user.zipCode }} {{ user.city }} </p>
                <p class="card-text">Date naissance:{{ user.birthday ? user.birthday|date('Y-m-d') : '' }} </p>
                <a href="{{ path('user_edit', {'id': user.id}) }}" class="btn btn-primary">Modifiez vos informations</a>
            </div>

{#  navigation dans les diefférents onglets accesibles par l'adherent#}
            <div class="col-12 col-lg-8">
{#  navigation dans les différentes zones 3 en initiales#}
                <section id="tabs" class="project-tab">
                    <div class="container">
                        <div class="row">
{#                            {{ dump(user) }}#}

                            {% for inscr in user.inscriptions %}
                            <div class="col-lg-12">
                                <nav>
                                    <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                        <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab"
                                           href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Mon
                                            inscription</a>
                                        <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab"
                                           href="#nav-profile" role="tab" aria-controls="nav-profile"
                                           aria-selected="false">Mes documents</a>
                                        <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                           href="#nav-contact" role="tab" aria-controls="nav-contact"
                                           aria-selected="false">Les sorties</a>
                                        <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                           href="#nav-inscription" role="tab" aria-controls="nav-contact"
                                           aria-selected="false">Inscription</a>
                                    </div>
                                </nav>

                                <div class="tab-content" id="nav-tabContent">

                                    <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                         aria-labelledby="nav-home-tab">
                                        <div class="mt-3">Ma periode d'inscription : <strong>{{ inscr.inscriptionYear }}</strong></div>
                                        <div class="mt-3">Statut  de votre inscription: <strong>{{ inscr.inscriptionStatus.name }}</strong></div>
                                        <h4 class="mt-3"><strong>Rôle et activités:</strong></h4>
                                        <ul style="list-style: square;">
                                            {%  if user.isMonitor %}
                                                <li>{{  'Moniteur: niveau ' ~ user.level.name   }}</li>
                                            {% endif  %}
                                            {%  if user.isDiver %}
                                                <li>{{  'Adhérent plongeur: niveau ' ~ user.level.name   }}</li>
                                            {% endif  %}
                                            {%  if user.isSwim %}
                                                <li>{{  'Adhérent nageur'   }}</li>
                                            {% endif  %}
                                            {% if user.isAdmin %}
                                                <li>{{  'Authorisation: administration du site'   }}</li>
                                            {% endif %}
                                        </ul>
                                        <h4 class="mt-3"><strong>Droits à l'image</strong></h4>
                                        <div class="mt-2">imageRight
                                            : {{ inscr.imageRight? 'Vous avez autorisé la diffusion d\'image' : 'Vous avez n\'autorisé pas la diffusion d\'image' }}</div>
                                        <h4 class="mt-3"><strong>un commentaire?</strong></h4>
                                        <div>{{ user.comment }}</div>

{#    PAs d'afficahge du statut isHandi    #}

                                    </div>

                                    <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                                         aria-labelledby="nav-profile-tab">
                                        <div class="mt-2">Téléchargement du réglement intérieur</div>
                                        <a href="{{ inscr.internalProcedure }}">Télécharger</a>

                                        <div class="mt-2">Téléchargement de votre fiche inscription</div>
                                        <a href="{{ inscr.inscriptionSheet }}"> Télécharger</a>

                                        <div class="mt-2">Téléchargement de votre certificat médicale</div>
                                        <a href="{{ inscr.medicalCertificate }}"> Télécharger</a>


                                    </div>

                                    <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                         aria-labelledby="nav-contact-tab">
                                        <h4 class="mt-3"><strong>Listes des sorties disponibles:</strong></h4>
                                        <div>Avec bouton inscription et auttres fonctionnalités à prévoir</div>

                                    </div>

                                    <div class="tab-pane fade" id="nav-inscription" role="tabpanel"
                                         aria-labelledby="nav-contact-tab">
                                        <div><a href="{{ path('inscriptionForm') }}">S'inscrire</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                {% endfor %}
            </div>
        </div>
    </div>


    <a href="{{ path('user_index') }}">back to list</a>
    <a href="{{ path('user_edit', {'id': user.id}) }}">edit</a>

{% endblock %}
